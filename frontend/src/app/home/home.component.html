<main class="learning-path-container">
 
  <section class="home-grid">

    <div class="path-wrapper">

      <div class="path-content">
        
        <section class="units-container">

          @for (unit of units; track unit.id; let unitIndex = $index) {
            <header class="unit-header" [style.--unit-color]="unit.color">
              
              <h2 class="unit-title">{{ unit.title }}</h2>
              
              <p class="unit-description">{{ unit.description }}</p>
            
            </header>


            <section class="lessons-grid">

              @for (lesson of unit.lessons; track lesson.id; let lessonIndex = $index) {
                <article
                  [id]="'lesson-' + lesson.id"
                  class="lesson-node"
                  [class.completed]="lesson.status === 'completed'"
                  [class.in-progress]="lesson.status === 'in-progress'"
                  [class.available]="lesson.status === 'available'"
                  [class.locked]="lesson.status === 'locked'"
                  [class.current]="lesson.id === currentLessonId"
                  (click)="onLessonClick(lesson)"
                >

                  <figure class="lesson-icon-wrapper">

                    <span class="lesson-icon">{{ lesson.icon }}</span>

                    @if (lesson.status === 'completed') {
                      <span class="checkmark">‚úì</span>
                    }

                    @if (lesson.status === 'locked') {
                      <div class="lock-overlay">
                        <span class="lock-icon">üîí</span>
                      </div>
                    }
                  </figure>

                  <div class="lesson-info">

                    <h3 class="lesson-title">{{ lesson.title }}</h3>

                    <p class="lesson-description">{{ lesson.description }}</p>

                    <footer class="lesson-xp">
                      <span class="xp-badge">{{ lesson.xp }} XP</span>
                    </footer>

                  </div>

                </article>
              }
            </section>
          }
        </section>
      </div>
    </div>

    <section class="sidebar">
      
      <header class="header-stats">
        
        <article class="stat-card">
        
          <figure class="stat-icon">üî•</figure>
        
          <div class="stat-content">
        
            <data [value]="currentStreak" class="stat-value">{{ currentStreak }}</data>
        
            <span class="stat-label">Day streak</span>
        
          </div>
        
        </article>
      
        
        <article class="stat-card">
        
          <figure class="stat-icon">‚≠ê</figure>
        
          <div class="stat-content">
        
            <data [value]="totalXp" class="stat-value">{{ totalXp }}</data>
        
            <span class="stat-label">Total XP</span>
        
          </div>
        
        </article>
      
      </header>

      <article class="daily-quests">

        <h3 class="quests-title">Daily Quests</h3>
        
        <ul class="quests-list">
        
          @for (quest of dailyQuests; track quest.id) {
            <li>
        
              <figure class="quest-icon">{{ quest.icon }}</figure>
        
              <div class="quest-content">
        
                <p class="quest-description">{{ quest.description }}</p>
        
                <div class="quest-progress">
        
                  <div class="progress-bar" [style.width.%]="getQuestProgress(quest)"></div>
        
                  <span class="progress-text">{{ quest.current }}/{{ quest.target }}</span>
        
                </div>
        
              </div>
        
            </li>
          }
        
        </ul>
      </article>

      <section class="sidebar-buttons">

        <button
          class="jump-button"
          (click)="scrollToCurrentLesson()"
          aria-label="Jump to current lesson"
        >  
          @if (!isUserBelowLesson) {
          
            <span aria-hidden="true">‚Üì</span>
          
          } @else {
          
            <span aria-hidden="true">‚Üë</span>
          
          }
        </button>

        <button class="add-unit-button" (click)="redirectToCreateExercise()" aria-label="Add new unit">
          <span aria-hidden="true">+</span>
        </button>

      
      </section>
    
    </section>
  
  </section>

</main>
