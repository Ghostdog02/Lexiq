<div class="leaderboard-container">
  <div class="leaderboard-header">
    <h1 class="page-title">Leaderboard</h1>
    <p class="page-subtitle">See how you stack up against other learners</p>

    <div class="timeframe-selector">
      <button
        class="timeframe-btn"
        [class.active]="timeFrame === 'weekly'"
        (click)="setTimeFrame('weekly')">
        Weekly
      </button>
      <button
        class="timeframe-btn"
        [class.active]="timeFrame === 'monthly'"
        (click)="setTimeFrame('monthly')">
        Monthly
      </button>
      <button
        class="timeframe-btn"
        [class.active]="timeFrame === 'allTime'"
        (click)="setTimeFrame('allTime')">
        All Time
      </button>
    </div>
  </div>

  <div class="leaderboard-list">
    @for (user of leaderboardUsers; track user.rank) {
    <div
      class="leaderboard-card"
      [class.current-user]="isCurrentUser(user)"
      [class.top-three]="user.rank <= 3">

      <div class="rank-section">
        <div class="rank-badge" [class]="getRankBadgeClass(user.rank)">
          @if (user.rank <= 3) {
          <span class="rank-icon">{{ getRankIcon(user.rank) }}</span>
          } @else {
          <span class="rank-number">#{{ user.rank }}</span>
          }
        </div>
        <div class="rank-change" [class]="getChangeClass(user.change)">
          <span class="change-icon">{{ getChangeIcon(user.change) }}</span>
          @if (user.change !== 0) {
          <span class="change-value">{{ user.change < 0 ? -user.change : user.change }}</span>
          }
        </div>
      </div>

      <div class="user-section">
        <img [src]="user.avatar" [alt]="user.name" class="user-avatar">
        <div class="user-info">
          <h3 class="user-name">{{ user.name }}</h3>
          <div class="user-level">Level {{ user.level }}</div>
        </div>
      </div>

      <div class="stats-section">
        <div class="stat-item">
          <div class="stat-icon">âš¡</div>
          <div class="stat-details">
            <div class="stat-value">{{ user.totalXp.toLocaleString() }}</div>
            <div class="stat-label">Total XP</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">ğŸ”¥</div>
          <div class="stat-details">
            <div class="stat-value">{{ user.currentStreak }}</div>
            <div class="stat-label">Streak</div>
          </div>
        </div>

        <div class="stat-item">
          <div class="stat-icon">ğŸ†</div>
          <div class="stat-details">
            <div class="stat-value">{{ user.longestStreak }}</div>
            <div class="stat-label">Best</div>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</div>